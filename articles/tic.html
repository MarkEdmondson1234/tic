<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with CI for R • tic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="Getting started with CI for R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="../hexlogo.png" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>tic <small>v0.2.13.9016</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/features.html">Feature Overview</a>
    </li>
    <li>
      <a href="../articles/build-lifecycle.html">The CI Build Lifecycle</a>
    </li>
    <li>
      <a href="../articles/tic-travis.html">tic &amp; travis</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced Usage</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deployment</a>
    </li>
    <li>
      <a href="../articles/custom-steps.html">Custom Steps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropenscilabs/tic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting started with CI for R</h1>
                        <h4 class="author">Patrick Schratz, Kirill Müller</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/tic/blob/master/vignettes/tic.Rmd"><code>vignettes/tic.Rmd</code></a></small>
      <div class="hidden name"><code>tic.Rmd</code></div>

    </div>

    
    
<div id="prerequisites" class="section level1">
<h1 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h1>
<p>If you are unfamiliar with the term Continuous Integration (CI), we highly recommend to read the following resources:</p>
<ul>
<li><a href="https://ropensci.github.io/dev_guide/ci.html" class="uri">https://ropensci.github.io/dev_guide/ci.html</a></li>
<li><a href="https://juliasilge.com/blog/beginners-guide-to-travis/" class="uri">https://juliasilge.com/blog/beginners-guide-to-travis/</a></li>
<li><a href="http://mahugh.com/2016/09/02/travis-ci-for-test-automation/" class="uri">http://mahugh.com/2016/09/02/travis-ci-for-test-automation/</a></li>
</ul>
<p>The most important improvements over existing solutions are:</p>
<ol style="list-style-type: decimal">
<li><p>Deployment to a Git repository is greatly simplified. Update your repository with results from the CI build.</p></li>
<li><p>Support for R packages and other kinds of project (bookdown, blogdown, etc.), with predefined templates. Set up your project to deploy rendered versions of your book or blog with a single push to Git.</p></li>
<li><p>Workflow specification in a single <code>.R</code> file, regardless of CI system used.<br>
Forget about <code>.yml</code> files or web browser configurations.</p></li>
</ol>
<p>Other minor advantages include the use of <code><a href="https://www.rdocumentation.org/packages/rcmdcheck/topics/rcmdcheck">rcmdcheck::rcmdcheck()</a></code> for package checking a and robust caching approach of dependencies.</p>
<p>A more comprehensive summary of all advantages can be found in the <a href="advantages.html">advantages</a> vignette.</p>
</div>
<div id="initialization" class="section level1">
<h1 class="hasAnchor">
<a href="#initialization" class="anchor"></a>Initialization</h1>
<p>The easiest way to use <em>tic</em> for CI services is to call <code><a href="../reference/use_tic.html">tic::use_tic()</a></code>. This will create templates for both “Travis CI” and “Appveyor” and initialize all the required authentication steps for deployment. During the process, browser pages will open up, ensuring that all permissions are set correctly and all apps are authorized. Also a Personal Access Token (PAT) will be created on GitHub and stored as an encrypted variable on Travis. This avoids hitting rate limitations when accessing the GitHub API, see <a href="https://itsalocke.com/blog/using-travis-make-sure-you-use-a-github-pat/">this blog post</a> for more details. The PAT creation cannot be fully automated as some input from the user on GitHub is required when creating the PAT.</p>
<p>First, authentication with Travis (a browser window opens) and GitHub is initiated (another browser window opens). Also, the repo is activated on Travis.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">tic<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/tic/topics/use_tic">use_tic</a></span>()</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">┌───────────────────────┐</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">│                       │</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">│   Welcome to <span class="st">`</span><span class="dt">tic</span><span class="st">`</span><span class="op">!</span><span class="st">   </span>│</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">│                       │</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">└───────────────────────┘</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">ℹ This wizard will set all the required tokens and files</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  on Travis CI and GitHub. Lets get started<span class="op">!</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">✔ Setting active project to <span class="st">'/home/pjs/git/test2'</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">ℹ Using active project <span class="st">'/home/pjs/git/test2'</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">┌──────────────────────────────────────────────────────┐</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">│                                                      │</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">│   Step <span class="co">#1: We check if a GitHub repository exists.   │</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">│                                                      │</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">└──────────────────────────────────────────────────────┘</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb1-18" data-line-number="18">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb1-19" data-line-number="19">Authentication complete.</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">✔ Authentication successful.</a>
<a class="sourceLine" id="cb1-21" data-line-number="21">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb1-24" data-line-number="24">Authentication complete.</a>
<a class="sourceLine" id="cb1-25" data-line-number="25">✔ Authentication successful.</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">✔ GitHub repo exists.</a>
<a class="sourceLine" id="cb1-27" data-line-number="27">┌─────────────────────────────────────────────────────┐</a>
<a class="sourceLine" id="cb1-28" data-line-number="28">│                                                     │</a>
<a class="sourceLine" id="cb1-29" data-line-number="29">│   Step <span class="co">#2: We check if Travis is already enabled.   │</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30">│                                                     │</a>
<a class="sourceLine" id="cb1-31" data-line-number="31">└─────────────────────────────────────────────────────┘</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb1-34" data-line-number="34">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb1-35" data-line-number="35">Authentication complete.</a>
<a class="sourceLine" id="cb1-36" data-line-number="36">✔ Authentication successful.</a>
<a class="sourceLine" id="cb1-37" data-line-number="37">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb1-38" data-line-number="38">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb1-39" data-line-number="39">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb1-40" data-line-number="40">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb1-41" data-line-number="41">Authentication complete.</a>
<a class="sourceLine" id="cb1-42" data-line-number="42">✔ Authentication successful.</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">Finished activating repo pat<span class="op">-</span>s<span class="op">/</span>test2 on Travis CI.</a></code></pre></div>
<p>Next, you will be asked if the current <code>.travis.yml</code> should be replaced with the template from <em>tic</em> (if one exists). Otherwise, the template is added without asking.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">┌────────────────────────────────────────────────┐</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">│                                                │</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">│   Step <span class="co">#3: We create new files                 │</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">│   <span class="st">`</span><span class="dt">.travis.yml</span><span class="st">`</span>, <span class="st">`</span><span class="dt">appveyor.yml</span><span class="st">`</span> and <span class="st">`</span><span class="dt">tic.R</span><span class="st">`</span>.   │</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">│                                                │</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">└────────────────────────────────────────────────┘</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">Overwrite pre<span class="op">-</span>existing file <span class="st">'.travis.yml'</span>?</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="dv">1</span><span class="op">:</span><span class="st"> </span>Absolutely not</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="dv">2</span><span class="op">:</span><span class="st"> </span>Nope</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="dv">3</span><span class="op">:</span><span class="st"> </span>Yeah</a></code></pre></div>
<p>The same is done for Appveyor.</p>
<pre><code>Selection: 3
✔ Writing '.travis.yml'
Overwrite pre-existing file 'appveyor.yml'?
1: Yeah
2: Nope
3: No way

Selection: 1
✔ Writing 'appveyor.yml'</code></pre>
<p>And also for the <code>tic.R</code> file. Additionally, it is added to <code>.Rbuildignore</code> to not interfere with the package building.</p>
<pre><code>Overwrite tic.R? 

1: Yes
2: No

Selection: 1
Added tic.R from template.
✔ Adding '^tic\\.R$' to '.Rbuildignore'</code></pre>
<p>Next, the private deploy key for Travis is added to the GitHub repo. This is needed to give Travis permissions to deploy into the GitHub repo.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">┌───────────────────────────────────────────┐</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">│                                           │</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">│   Step <span class="co">#4: We create a SSH key pair       │</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">│   to allow Travis deployment to GitHub.   │</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">│                                           │</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">└───────────────────────────────────────────┘</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">Finished adding deploy keys on GitHub <span class="cf">for</span> repo <span class="op">&lt;</span>username<span class="op">/</span>repo<span class="op">&gt;</span>.</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">✔ Successfully added public deploy key <span class="st">'travis+tic'</span> to GitHub <span class="cf">for</span> <span class="op">&lt;</span>username<span class="op">/</span>repo<span class="op">&gt;</span>. </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">❯  You should receive a confirmation e<span class="op">-</span>mail from GitHub.</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">❯  Delete the key <span class="cf">in</span> the repositorys settings to revoke access <span class="cf">for</span> that key or when you no longer need it.</a></code></pre></div>
<p>Besides the private deploy key, also the public deploy key needs to be added as an environment variable to Travis. As it is a SSH key, its named <code>id_rsa</code> by default.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">Authentication complete.</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">✔ Authentication successful.</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">Finished updating private environment variable id_rsa <span class="cf">for</span> <span class="op">&lt;</span>username<span class="op">/</span>repo<span class="op">&gt;</span><span class="st"> </span>on Travis CI.</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">✔ Successfully added private deploy key to <span class="op">&lt;</span>username<span class="op">/</span>repo<span class="op">&gt;</span><span class="st"> </span>as secure environment variable id_rsa to Travis CI.</a></code></pre></div>
<p>Last, a PAT is created to avoid the download limit of GitHub packages on Travis. You now see two environment variables in your setting on Travis CI: <code>GITHUB_PAT</code> and <code>id_rsa</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">┌─────────────────────────────────────────────────────────┐</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">│                                                         │</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">│   Step <span class="co">#5: We create a GitHub PAT key on Travis CI      │</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">│   to avoid GitHub API rate limitations <span class="cf">in</span> the builds.   │</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">│                                                         │</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">└─────────────────────────────────────────────────────────┘</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">❯  Authenticating to GitHub.</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">Waiting <span class="cf">for</span> authentication <span class="cf">in</span> browser...</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">Press Esc<span class="op">/</span>Ctrl <span class="op">+</span><span class="st"> </span>C to abort</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">Authentication complete.</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">✔ Authentication successful.</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">❯  Creating a personal access <span class="kw">token</span> (PAT).</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">❯  The suggested description <span class="st">'travis+tic for pat-s/test2'</span> has been copied to the clipboard.travis<span class="op">+</span>tic <span class="cf">for</span> pat<span class="op">-</span>s<span class="op">/</span>test2</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">ℹ  If you use this token only to avoid GitHubs rate limit, you can leave all scopes unchecked.</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">ℹ  Then, copy the new token to the clipboard, it will be detected and applied automatically.</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">ℹ Please visit</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">  https<span class="op">:</span><span class="er">//</span>github.com<span class="op">/</span>settings<span class="op">/</span>tokens<span class="op">/</span>new</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">  A browser window will be opened.</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">ℹ  If you use this token only to avoid GitHubs rate limit, you can leave all scopes unchecked.</a></code></pre></div>
<p>Most functionality of the wizard comes from the <em>travis</em> package. See <a href="tic-travis.html">here</a> for more detailed information on how <em>tic</em> and <em>travis</em> work together.</p>
</div>
<div id="explanation-of-the-basic-template" class="section level1">
<h1 class="hasAnchor">
<a href="#explanation-of-the-basic-template" class="anchor"></a>Explanation of the basic template</h1>
<p>After having called <code><a href="../reference/use_tic.html">tic::use_tic()</a></code> you will find a <code>.travis.yml</code>, <code>appveyor.yml</code> and a <code>tic.R</code> file in your repo. Usually you do not need to touch <code>appveyor.yml</code> and <code>.travis.yml</code> anymore. All build customizations are done in <code>tic.R</code> and apply to both services. If you want more information about the whole build lifecycle, check the <a href="build-lifecycle.html">Build lifecycle</a> vignette.</p>
<p>The basic <code>tic.R</code> template looks as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/do_package_checks.html">do_package_checks</a></span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="../reference/do_pkgdown.html">do_pkgdown</a></span>()</a></code></pre></div>
<p>Let’s break down what happens here:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/do_package_checks.html">do_package_checks</a></span>()</a></code></pre></div>
<p><code><a href="../reference/do_package_checks.html">do_package_checks()</a></code> Is a macro which adds essential steps to various stages of a CI run. Essentially, it adds <code><a href="../reference/step_rcmdcheck.html">step_rcmdcheck()</a></code> to the “script” stage. This step performs the check of a R package. Afterwards, the code coverage is being checked using <code><a href="https://www.rdocumentation.org/packages/covr/topics/codecov">covr::codecov()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># step_install_deps() in the "install" stage, using the repos argument.</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co"># </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># step_rcmdcheck() in the "script" stage, using the warnings_are_errors, notes_are_errors, args, and build_args arguments.</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co"># A call to covr::codecov() in the "after_success" stage (only if the codecov flag is set)</span></a></code></pre></div>
<p>The other macro in the default template is <code>do_pkdown()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/do_pkgdown.html">do_pkgdown</a></span>()</a></code></pre></div>
<p><code><a href="../reference/do_pkgdown.html">do_pkgdown()</a></code> adds five steps to the build process:</p>
<pre class="reval"><code># step_install_deps() in the "install" stage, using the repos argument.
# 
# step_setup_ssh() in the "before_deploy" to setup the upcoming deployment (if deploy is set),
# 
# step_setup_push_deploy() in the "before_deploy" stage (if deploy is set),
# 
# step_build_pkgdown() in the "deploy" stage, forwarding all ... arguments.
# 
# step_do_push_deploy() in the "deploy" stage.</code></pre>
<p>In a nutshell: All dependencies are being installed, the deployment setup is initialized, the pkgdown site is build and deployed.</p>
</div>
<div id="examples-projects" class="section level1">
<h1 class="hasAnchor">
<a href="#examples-projects" class="anchor"></a>Examples projects</h1>
<p><em>tic</em> can be used for various R projects:</p>
<ul>
<li>
<a href="https://github.com/ropenscilabs/tic.package">tic.package</a>: R packages with <a href="https://pkgdown.r-lib.org/"><em>pkgdown</em></a> documentation</li>
<li>
<a href="https://github.com/ropenscilabs/tic.packagedocs">tic.packagedocs</a>: R packages with <a href="http://hafen.github.io/packagedocs/"><em>packagedocs</em></a> documentation</li>
<li>
<a href="https://github.com/ropenscilabs/tic.drat">tic.drat</a>: CRAN-like package repositories with <a href="http://dirk.eddelbuettel.com/code/drat.html"><em>drat</em></a>
</li>
<li>
<a href="https://github.com/ropenscilabs/tic.blogdown">tic.blogdown</a>: Blogs with <a href="https://bookdown.org/yihui/blogdown/"><em>blogdown</em></a>
</li>
<li>
<a href="https://github.com/ropenscilabs/tic.bookdown">tic.bookdown</a>: Books with <a href="https://bookdown.org/"><em>bookdown</em></a>
</li>
<li>
<a href="https://github.com/ropenscilabs/tic.website">tic.website</a>: Websites with <a href="https://rmarkdown.rstudio.com/"><em>rmarkdown</em></a>
</li>
<li>
<a href="https://github.com/ropenscilabs/tic.figshare">tic.figshare</a>: Deploying artifacts to <a href="https://figshare.com/">figshare</a> (work in progress).</li>
<li>
<a href="https://github.com/ropenscilabs/tic.covrpage">tic.covrpage</a>: Unit test summary report.</li>
</ul>
<p>As a show case, we explain a “blogdown” project in more detail. <a href="https://bookdown.org/yihui/blogdown/"><code>blogdown</code></a> is an R package for publishing websites. Under the hood, it uses the framework <a href="https://gohugo.io/">HUGO</a> which gets installed by the respective <code>tic.R</code> <a href="https://github.com/krlmlr/tic.blogdown/blob/975aedd43fec1dd55e8348eccfca2c7c5f663006/tic.R#L5">template</a> in the “install” section:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/dsl.html">get_stage</a></span>(<span class="st">"install"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/dsl.html">add_code_step</a></span>(blogdown<span class="op">::</span><span class="kw">install_hugo</span>(), </a>
<a class="sourceLine" id="cb13-3" data-line-number="3">                <span class="dt">prepare_call =</span> remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"rstudio/blogdown"</span>))</a></code></pre></div>
<p>Then the website is built and deployed. The <code>blogdown::build_site()</code> function for websites is the equivalent to <code><a href="https://pkgdown.r-lib.org/reference/build_site.html">pkgdown::build_site()</a></code> for R packages.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/dsl.html">get_stage</a></span>(<span class="st">"deploy"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="../reference/dsl.html">add_code_step</a></span>(blogdown<span class="op">::</span><span class="kw">build_site</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="../reference/dsl.html">add_step</a></span>(<span class="kw"><a href="../reference/step_push_deploy.html">step_push_deploy</a></span>())</a></code></pre></div>
<p>Steps and stages differ between projects (e.g. between a “blogdown” website and a “package”). <em>tic</em> is smart enough to detect your project automatically when calling <code><a href="../reference/use_tic.html">tic::use_tic()</a></code> and will add the correct template.</p>
<p><strong>Note:</strong> Currently, publishing to <a href="https://figshare.com/" class="uri">https://figshare.com/</a> doesn’t work. Also, publishing to <a href="https://zenodo.org/" class="uri">https://zenodo.org/</a> is work in progress.</p>
<div id="tic-based-r-projects-from-the-community" class="section level2">
<h2 class="hasAnchor">
<a href="#tic-based-r-projects-from-the-community" class="anchor"></a><em>tic</em> based R projects from the community</h2>
<p>The templates we provide with <em>tic</em> are minimal working examples. In the following we list various R projects with non-standard/tailored <em>tic</em>-based workflows. You may find inspiration for your own project there. (Please contact us if you want to add yours to the list!)</p>
<div id="packages" class="section level3">
<h3 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h3>
<ul>
<li><a href="https://github.com/mlr-org/mlr">mlr</a></li>
<li><a href="https://github.com/r-spatial/sf">sf</a></li>
<li><a href="https://github.com/r-dbi/DBI">dbi</a></li>
</ul>
</div>
<div id="bookdown" class="section level3">
<h3 class="hasAnchor">
<a href="#bookdown" class="anchor"></a>Bookdown</h3>
</div>
<div id="blogdown" class="section level3">
<h3 class="hasAnchor">
<a href="#blogdown" class="anchor"></a>Blogdown</h3>
</div>
</div>
</div>
<div id="advanced" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced" class="anchor"></a>Advanced</h1>
<p>The advanced usage of <em>tic</em> is described in more detail in the <a href="advanced.html">Advanced Usage</a> article:</p>
<ul>
<li><a href="advanced.html#pkgdown-deployment">Options for <em>pkgdown</em> deployment</a></li>
<li><a href="advanced.html#using-travis-ci-meta-information">Using Travis CI Meta-information</a></li>
<li><a href="advanced.html#troubleshooting-running-tic-locally">Troubleshooting: Running <em>tic</em> locally</a></li>
<li><a href="advanced.html#troubleshooting-running-tic-locally">Troubleshooting: Enter into the Travis build</a></li>
<li><a href="custom-steps.html">Writing custom steps</a></li>
</ul>
<p>The build lifecycle when using <em>tic</em> is explained in the <a href="build-lifecycle.html">Build lifecycle</a> article.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#initialization">Initialization</a></li>
      <li><a href="#explanation-of-the-basic-template">Explanation of the basic template</a></li>
      <li>
<a href="#examples-projects">Examples projects</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tic-based-r-projects-from-the-community"><em>tic</em> based R projects from the community</a></li>
      </ul>
</li>
      <li><a href="#advanced">Advanced</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div style="margin-top:-9px">
  <p>tic is a part of <img src="https://github.com/ropensci/logos/raw/master/icon_lettering_color.png" height="40" alt="rOpenSci">. Learn more at <a href="https://ropensci.org">ropensci.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://krlmlr.info">Kirill Müller</a>, <a href="https://pjs-web.de">Patrick Schratz</a>, Mika Braginsky, Karthik Ram, Jeroen Ooms, rOpenSci.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a> &amp; <a href="https://docs.ropensci.org/rotemplate/">rotemplate</a>.
  </p>
</div>
      </footer>
</div>

  

  </body>
</html>
