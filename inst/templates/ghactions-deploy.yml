      - uses: chrnorm/deployment-action@v1.1.1
        name: Create GitHub deployment
        id: deployment
        with:
          token: "${{ github.token }}"
          environment: production

      - name: "[Stage] Before Deploy"
        if: runner.os != 'Windows'
        run: |
          Rscript -e "tic::before_deploy()"

      - name: "[Stage] Deploy"
        if: runner.os != 'Windows'
        run: Rscript -e "tic::deploy()"

      - name: "[Stage] After Deploy"
        if: runner.os != 'Windows'
        run: Rscript -e "tic::after_deploy()"

      - name: Update deployment status (success)
        if: success()
        uses: chrnorm/deployment-status@releases/v1
        with:
          token: "${{ github.token }}"
          target-url: http://my-app-url.com
          state: "success"
          deployment_id: ${{ steps.deployment.outputs.deployment_id }}

      - name: Update deployment status (failure)
        if: failure()
        uses: chrnorm/deployment-status@releases/v1
        with:
          token: "${{ github.token }}"
          target-url: http://my-app-url.com
          state: "failure"
          deployment_id: ${{ steps.deployment.outputs.deployment_id }}
